Version 4
SHEET 1 2188 5104
WIRE -672 -256 -800 -256
WIRE -800 -240 -800 -256
WIRE -672 -192 -672 -256
WIRE -880 -144 -912 -144
WIRE -800 -144 -800 -160
WIRE 2000 -144 1920 -144
WIRE 2160 -144 2080 -144
WIRE -800 -112 -800 -144
WIRE 288 -112 256 -112
WIRE 400 -112 368 -112
WIRE 512 -112 480 -112
WIRE 16 -96 -16 -96
WIRE 48 -96 16 -96
WIRE 192 -96 128 -96
WIRE -672 -32 -672 -112
WIRE -672 -32 -800 -32
WIRE 1984 -16 1984 -32
WIRE -672 0 -672 -32
WIRE 448 0 448 -16
WIRE 864 0 864 -48
WIRE 1824 0 1808 0
WIRE 1920 0 1920 -144
WIRE 1920 0 1904 0
WIRE 1952 0 1920 0
WIRE 80 16 80 0
WIRE 368 16 368 -112
WIRE 416 16 368 16
WIRE 2160 16 2160 -144
WIRE 2160 16 2016 16
WIRE 16 32 16 -96
WIRE 48 32 16 32
WIRE 512 32 512 -112
WIRE 512 32 480 32
WIRE 672 32 512 32
WIRE 1808 32 1808 0
WIRE 1952 32 1936 32
WIRE 192 48 192 -96
WIRE 192 48 112 48
WIRE 416 48 192 48
WIRE 1776 48 1248 48
WIRE -128 64 -192 64
WIRE -16 64 -64 64
WIRE 48 64 -16 64
WIRE 672 64 672 32
WIRE 752 64 736 64
WIRE 1072 64 976 64
WIRE 1248 64 1248 48
WIRE 1248 64 1072 64
WIRE 1984 64 1984 48
WIRE 448 80 448 64
WIRE 1072 80 1072 64
WIRE 80 96 80 80
WIRE 1776 112 1776 48
WIRE 1936 112 1936 32
WIRE 1936 112 1856 112
WIRE 2016 112 1936 112
WIRE 2160 112 2160 16
WIRE 2160 112 2096 112
WIRE -16 160 -16 144
WIRE 752 160 688 160
WIRE 1008 160 976 160
WIRE 1072 160 1072 144
WIRE 1072 160 1008 160
WIRE 1936 176 1936 112
WIRE 1936 176 1616 176
WIRE 1936 192 1936 176
WIRE 816 256 816 224
WIRE 912 256 912 224
WIRE 912 256 816 256
WIRE 1008 256 1008 160
WIRE 1568 256 1536 256
WIRE 912 272 912 256
WIRE 1936 272 1936 256
WIRE 1936 272 1616 272
WIRE 1936 336 1936 272
FLAG -944 288 0
FLAG -944 208 Vcc
FLAG -784 288 0
FLAG -784 208 Vref
FLAG -672 288 0
FLAG -672 208 GPIO
FLAG -672 0 0
FLAG -912 -144 mic
FLAG 912 272 0
FLAG 864 -48 Vcc
FLAG 1008 256 0
FLAG 1984 -32 Vcc
FLAG 1936 336 0
FLAG 1808 32 0
FLAG 1984 64 0
FLAG 1536 256 GPIO
FLAG 80 0 Vcc
FLAG 80 96 0
FLAG -96 -96 Vref
FLAG -16 160 Vref
FLAG -944 80 0
FLAG -944 0 sineref
FLAG -192 64 sineref2
FLAG 448 -16 Vcc
FLAG 448 80 0
FLAG 256 -112 Vref
FLAG -256 272 0
FLAG -256 192 AC
FLAG 688 160 Vref
FLAG -1344 96 0
FLAG -1344 -64 sineref2
SYMBOL voltage -944 192 R0
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
SYMATTR InstName V1
SYMATTR Value 3.3
SYMBOL voltage -784 192 R0
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
SYMATTR InstName V5
SYMATTR Value 1
SYMBOL voltage -672 192 R0
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
SYMATTR InstName V6
SYMATTR Value PULSE(0 3.3 0.001 0 0 0.001 1 1)
SYMBOL voltage -672 -208 R0
WINDOW 3 19 95 Left 2
SYMATTR Value wavefile="sample.wav" chan=0
SYMATTR InstName V7
SYMBOL res -816 -256 R0
SYMATTR InstName R1
SYMATTR Value 1000
SYMBOL res -816 -128 R0
SYMATTR InstName R6
SYMATTR Value 500
SYMBOL voltage -896 -144 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 -32 56 VBottom 2
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
SYMATTR InstName V8
SYMATTR Value 0.65
SYMBOL LTC1966 864 112 R0
SYMATTR InstName U5
SYMBOL cap 1088 144 R180
WINDOW 0 24 56 Left 2
WINDOW 3 24 8 Left 2
SYMATTR InstName C6
SYMATTR Value 1µ
SYMBOL Opamps\\opamp2 1984 -48 R0
SYMATTR InstName U6
SYMATTR Value MAX409B
SYMBOL res 2096 -160 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R14
SYMATTR Value 10k
SYMBOL res 1920 -16 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 54 VTop 2
SYMATTR InstName R15
SYMATTR Value 10k
SYMBOL res 2112 96 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R16
SYMATTR Value 10k
SYMBOL res 1872 96 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R17
SYMATTR Value 20k
SYMBOL cap 1952 256 R180
WINDOW 0 24 56 Left 2
WINDOW 3 24 8 Left 2
SYMATTR InstName C7
SYMATTR Value 100µ
SYMBOL nmos 1568 176 R0
SYMATTR InstName M2
SYMATTR Value NMOS_SSM3K15AFS
SYMATTR Prefix X
SYMBOL Opamps\\opamp2 80 -16 R0
SYMATTR InstName U7
SYMATTR Value MAX409B
SYMBOL res 144 -112 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R18
SYMATTR Value 14k
SYMBOL res -112 -80 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 0 56 VBottom 2
SYMATTR InstName R19
SYMATTR Value 1k
SYMBOL res -32 48 R0
SYMATTR InstName R20
SYMATTR Value 47k
SYMBOL cap -64 48 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C8
SYMATTR Value 0.1µ
SYMBOL cap 736 48 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C1
SYMATTR Value 100n
SYMBOL voltage -944 -16 R0
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
SYMATTR InstName V2
SYMATTR Value SINE(0.65 0.003 500)
SYMBOL Opamps\\opamp2 448 -32 R0
SYMATTR InstName U1
SYMATTR Value MAX409B
SYMBOL res 496 -128 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R2
SYMATTR Value 14k
SYMBOL res 272 -96 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 0 56 VBottom 2
SYMATTR InstName R3
SYMATTR Value 1k
SYMBOL voltage -256 176 R0
WINDOW 123 24 124 Left 2
WINDOW 39 0 0 Left 2
SYMATTR Value2 AC 0.000150
SYMATTR InstName V3
SYMATTR Value ""
SYMBOL voltage -1344 0 R0
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
SYMATTR InstName V4
SYMATTR Value SINE(0.65 0.003 500 0 0 0)
SYMBOL voltage -1344 -80 R0
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
WINDOW 3 24 44 Left 2
SYMATTR InstName V9
SYMATTR Value SINE(0.65 0.003 500 0 0 0)
TEXT -968 360 Left 2 !.tran 1s
TEXT -976 448 Left 2 !* ////////////// MAX409B MACROMODEL //////////////////\n*\n*  ===>  MAX409B MUST BE OPERATED WITH CLOSED-LOOP\n*        GAIN OF 10V/V OR GREATER TO INSURE STABILITY  <====\n*\n* connections:        non-inverting input\n*                     |   inverting input\n*                     |   |   positive power-supply\n*                     |   |   |   negative power-supply\n*                     |   |   |   |   output\n*                     |   |   |   |   |\n* OUTPUT CONNECTS:    1   2   99  50  97\n*\n.SUBCKT MAX409B 1 2 99 50 97\n****************INPUT STAGE**********************\nI1 99 4 20U\nM1   5  2 4 99 MOSFET\nR3   5 50 5.2696K\nM2   6  7 4 99 MOSFET\nR4   6 50 5.2696K\nCI1  1  0 2P\nCI2  2  0 2P\nDP1  1 99 DA\nDP2 50  1 DX\nDP3  2 99 DX\nDP4 50  2 DB\nC4  5 6 .07N\n*POLE AT 25KHZ\n************ GSUP CREATES AVOL VS VSUPPLY ********\nEH 99 98 99 50 0.5\nGSUP 0 106 POLY(1) 99 50 320 -41 1.2\n*THIS POLY VCCS MODELS THE OPEN LOOP GAIN AS\n*A FUNCTION OF THE POWER SUPPLY, WHICH WILL BE MULT. NODE 5,6 VOLT.\nRVSUP 0 106 1E4\n************ GAIN, 1ST POLE, SLEW STAGE************\nG0 98 9 POLY(2) 5 6 106 0 0 0 0 0 1E-6\n*GO MULTIPLIES NODE 106, AVOL VS SUPPLY, AND NODES 5,6 FROM INPUT STAGE.\nVS 9 10 0V\nR0  98  9 1E6\nC3 10 98 1.3UF\nD1 9 111 DX\nD2 112 9 DX\nV11 99 111 .5V\nV12 112 50 .5V\nI2 99 50 -19U\nEOS 7 1 POLY(1) 16 98 .75E-3 1\n*********COMMON-MODE ZERO STAGE********\nG4 98 16 POLY(2) 1 98 2 98 0 1E-7 1E-7\nR13 98 16 500\n******* POLE AND STAGE **********\nG3 98 15 10 98 1E-3\nR12 98 15 1E3\nC5 98 15 1.77N\n*            POLE AT 30KH\n******** POLE / ZERO STAGE ******\nG5 98 18 15 98 1E-3\nR14 98 18 1K\nC6 18 19 4.42NF\nR19 19 98 800\n*************OUTPUT STAGE****************\nF5 99 38 VA8 1\nD9 40 38 DX\nD10 38 99 DX\nVA7 99 40 0\nG12 98 32 18 98 1E-6\n*          ^ INSERT NODE FROM LAST STAGE HERE\nR15 98 32 1E6\nD3 32 36 DX\nD4 37 32 DX\nV5 35 37 .2V\nV4 36 35 -.2V\n*V5,V4 SET ISC\nR16 34 35 1K\nE1 99 33 99 32 1\nVA8 33 34 0V\nL 35 97 0.5\nRCON 35 97 30K\n*RCON ALSO  ENHANCES CONVERGENCE FEATURES\n******************************************\n.MODEL DA D(IS=100E-14 RS=0.5K)\n.MODEL DB D(IS=100E-14 RS=0.5K)\n.MODEL DX D(IS=100E-14)\n.MODEL MOSFET PMOS(VTO=-1.7 KP=1.8E-3)\n*VTO ESTABLISHES INPUT VOLT. RANGE\n.ENDS
TEXT -120 440 Left 2 !*********************************************************************\n*  TOSHIBA CORPORATION SEMICONDUCTOR & STORAGE PRODUCTS COMPANY\n*  Date                 : 15/12/2014\n*  File name            : SSM3K15AFS.lib\n*  Part Number          : SSM3K15AFS\n*  Parameter ver.       : Ver.1\n*  Simulator            : PSPICE\n*  Model call name      : NMOS_SSM3K15AFS\n*  TNOM                 : 25 degree\n*********************************************************************\n \n.SUBCKT NMOS_SSM3K15AFS 1 2 3\nM0 1 22 3 3\n+ smsmosfet\n+ L = 5E-006\n+ W = 0.008\n+ AD = 8e-09\n+ AS = 8e-09\n+ PD = 0.016\n+ PS = 0.016\nD0 3 1\n+ DDS1\nD1 3 1\n+ DDS2\nD2 2 10\n+ DGS1\nD3 3 10\n+ DGS2\nR1 10 3 1E+009\nR2 10 2 1E+009\nRG 2 22 200\n.MODEL smsmosfet NMOS\n+ LEVEL = 7\n+ MOBMOD = 1\n+ CAPMOD = 3\n+ NOIMOD = 1\n+ TOX = 1.5E-008\n+ XJ = 1.5E-007\n+ NCH = 1.7E+017\n+ NGATE = 0\n+ RSH = 0\n+ TNOM = 25\n+ VTH0 = 1.2076\n+ VOFF = -0.02\n+ NFACTOR = 3.583\n+ U0 = 952.2693\n+ K1 = 0.5\n+ K2 = 0\n+ K3 = 80\n+ K3B = 0\n+ W0 = 2.5E-006\n+ NLX = 1.74E-007\n+ DVT0 = 2.2\n+ DVT1 = 0.53\n+ DVT2 = -0.032\n+ DVT0W = 0\n+ DVT1W = 5.3E+006\n+ DVT2W = -0.032\n+ DWG = 0\n+ DWB = 0\n+ UA = 4.436e-13\n+ UB = 5.87E-019\n+ UC = -4.65E-011\n+ VSAT = 112118.3748\n+ A0 = 1.2732\n+ AGS = 0.029771\n+ B0 = 0\n+ B1 = 0\n+ KETA = -0.047\n+ A1 = 0\n+ A2 = 1\n+ DELTA = 0.02079\n+ RDSW = 8680\n+ PRWG = 0\n+ PRWB = 0\n+ WR = 1\n+ CDSC = 0.00024\n+ CDSCD = 0\n+ CDSCB = 0\n+ CIT = 0\n+ ETA0 = 0.08\n+ ETAB = -0.07\n+ DSUB = 0.56\n+ PCLM = 0.0014469\n+ PDIBLC1 = 0.39\n+ PDIBLC2 = 0.012118\n+ PDIBLCB = 0\n+ DROUT = 0.56\n+ PSCBE1 = 4.24E+008\n+ PSCBE2 = 1E-009\n+ PVAG = 0\n+ ALPHA0 = 0\n+ ALPHA1 = 0\n+ BETA0 = 30\n+ NJ = 1\n+ JS = 1.6481e-14\n+ XPART = 0\n+ CGSO = 1.9718e-10\n+ CGDO = 3.5042e-10\n+ CGBO = 0\n+ CGDL = 1.5468e-08\n+ CGSL = 2.4386e-12\n+ CKAPPA = 2.9066\n+ CF = 0\n+ CLC = 1E-007\n+ CLE = 0.6\n+ VOFFCV = 0\n+ NOFF = 1\n+ DLC = 0\n+ ACDE = 1\n+ MOIN = 15\n+ CJ = 3.2319e-06\n+ CJSW = 1E-012\n+ CJSWG = 1E-012\n+ PB = 0.40048\n+ PBSW = 1\n+ PBSWG = 1\n+ MJ = 1.7065\n+ MJSW = 0.33\n+ MJSWG = 0.33\n+ AF = 1\n+ EF = 1\n+ KF = 0\n+ UTE = -0.5\n+ KT1 = -0.665\n+ KT1L = 0\n+ KT2 = 0.022\n+ UA1 = 4.31E-009\n+ UB1 = -7.61E-018\n+ UC1 = -5.6E-011\n+ AT = 3300\n+ PRT = 15000\n+ XTI = 3\n+ TCJ = 0\n+ TPB = 0\n+ TCJSW = 0\n+ TPBSW = 0\n+ TCJSWG = 0\n+ TPBSWG = 0\n+ DWC = 0.0035277\n.MODEL DDS1 D\n+ TNOM = 25\n+ IS = 8.8013e-14\n+ RS = 1.1503\n+ N = 1.15\n+ CJO = 1.5691e-15\n+ VJ = 0.85666\n+ M = 0.54386\n+ XTI = 3\n+ BV = 30\n+ IBV = 0.0001\n.MODEL DDS2 D\n+ TNOM = 25\n+ IS = 8.8013e-14\n+ RS = 1.1503\n+ N = 1.15\n+ CJO = 2.9872e-12\n+ VJ = 0.69573\n+ M = 0.36689\n+ XTI = 3\n.MODEL DGS1 D\n+ TNOM = 25\n+ IS = 1E-015\n.MODEL DGS2 D\n+ TNOM = 25\n+ IS = 1E-015\n.ENDS
