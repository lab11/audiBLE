Version 4
SHEET 1 2180 5104
WIRE -464 -224 -464 -240
WIRE 1552 -160 1472 -160
WIRE 1712 -160 1632 -160
WIRE -464 -112 -464 -144
WIRE 736 -48 704 -48
WIRE 880 -48 816 -48
WIRE 1536 -32 1536 -48
WIRE 1376 -16 1360 -16
WIRE 1472 -16 1472 -160
WIRE 1472 -16 1456 -16
WIRE 1504 -16 1472 -16
WIRE 384 0 272 0
WIRE 1712 0 1712 -160
WIRE 1712 0 1568 0
WIRE 1360 16 1360 -16
WIRE 1504 16 1488 16
WIRE -688 48 -816 48
WIRE 1536 48 1536 32
WIRE -816 64 -816 48
WIRE 768 64 768 48
WIRE 384 80 384 0
WIRE 384 80 352 80
WIRE 704 80 704 -48
WIRE 736 80 704 80
WIRE 272 96 272 0
WIRE 272 96 224 96
WIRE 288 96 272 96
WIRE 880 96 880 -48
WIRE 880 96 800 96
WIRE 944 96 880 96
WIRE 1328 96 944 96
WIRE 1488 96 1488 16
WIRE 1488 96 1408 96
WIRE 1568 96 1488 96
WIRE 1712 96 1712 0
WIRE 1712 96 1648 96
WIRE -688 112 -688 48
WIRE 480 112 352 112
WIRE 736 112 480 112
WIRE 288 128 64 128
WIRE 448 144 352 144
WIRE 480 144 480 112
WIRE 704 144 704 80
WIRE 768 144 768 128
WIRE -896 160 -928 160
WIRE -816 160 -816 144
WIRE 288 160 256 160
WIRE 1488 160 1488 96
WIRE 1488 160 1168 160
WIRE 368 176 352 176
WIRE 1488 176 1488 160
WIRE -816 192 -816 160
WIRE 256 192 256 160
WIRE 448 208 448 144
WIRE 480 208 448 208
WIRE 448 240 448 208
WIRE 704 240 704 224
WIRE 1120 240 1104 240
WIRE 1488 256 1488 240
WIRE 1488 256 1168 256
WIRE -688 272 -688 192
WIRE -688 272 -816 272
WIRE 256 288 256 256
WIRE -688 304 -688 272
WIRE 1488 320 1488 256
FLAG 224 96 0
FLAG -256 192 0
FLAG -256 112 Vcc
FLAG 368 176 Vcc
FLAG 448 240 0
FLAG -128 192 0
FLAG -128 112 sineref
FLAG 256 288 0
FLAG 64 128 sound
FLAG -688 304 0
FLAG -928 160 sound
FLAG 768 48 Vcc
FLAG 768 144 0
FLAG 704 240 0
FLAG -464 144 0
FLAG -464 64 Vref
FLAG 944 96 rms
FLAG -464 -112 0
FLAG -464 -240 GPIO
FLAG 1536 -48 Vcc
FLAG 1488 320 0
FLAG 1360 16 0
FLAG 1536 48 0
FLAG 1104 240 GPIO
SYMBOL voltage -256 96 R0
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
SYMATTR InstName V1
SYMATTR Value 3.3
SYMBOL AutoGenerated\\LTC1966 320 128 R0
SYMATTR InstName U1
SYMBOL voltage -128 96 R0
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
SYMATTR InstName V2
SYMATTR Value SINE(0.65 0.314 3000)
SYMBOL cap 272 256 R180
WINDOW 0 24 56 Left 2
WINDOW 3 24 8 Left 2
SYMATTR InstName C1
SYMATTR Value 0.1µ
SYMBOL cap 496 208 R180
WINDOW 0 24 56 Left 2
WINDOW 3 24 8 Left 2
SYMATTR InstName C2
SYMATTR Value 1µ
SYMBOL voltage -688 96 R0
WINDOW 3 19 95 Left 2
SYMATTR Value wavefile="snaps.wav" chan=0
SYMATTR InstName V3
SYMBOL res -832 48 R0
SYMATTR InstName R2
SYMATTR Value 1000
SYMBOL res -832 176 R0
SYMATTR InstName R3
SYMATTR Value 500
SYMBOL voltage -912 160 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 -32 56 VBottom 2
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
SYMATTR InstName V4
SYMATTR Value 0.65
SYMBOL Opamps\\opamp2 768 32 R0
SYMATTR InstName U3
SYMATTR Value MAX409B
SYMBOL res 832 -64 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R4
SYMATTR Value 10k
SYMBOL res 720 240 R180
WINDOW 0 36 76 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName R5
SYMATTR Value 1k
SYMBOL voltage -464 48 R0
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
SYMATTR InstName V5
SYMATTR Value 1
SYMBOL voltage -464 -240 R0
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
SYMATTR InstName V6
SYMATTR Value PULSE(0 3.3 0.001 0 0 0.001 1 1)
SYMBOL Opamps\\opamp2 1536 -64 R0
SYMATTR InstName U4
SYMATTR Value MAX409B
SYMBOL res 1648 -176 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R8
SYMATTR Value 10k
SYMBOL res 1472 -32 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 54 VTop 2
SYMATTR InstName R9
SYMATTR Value 10k
SYMBOL res 1664 80 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R10
SYMATTR Value 10k
SYMBOL res 1424 80 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R11
SYMATTR Value 20k
SYMBOL cap 1504 240 R180
WINDOW 0 24 56 Left 2
WINDOW 3 24 8 Left 2
SYMATTR InstName C3
SYMATTR Value 100µ
SYMBOL nmos 1120 160 R0
SYMATTR InstName M1
SYMATTR Value NMOS_SSM3K15AFS
SYMATTR Prefix X
TEXT -288 248 Left 2 !.tran 0 1 0
TEXT -976 448 Left 2 !* ////////////// MAX409B MACROMODEL //////////////////\n*\n*  ===>  MAX409B MUST BE OPERATED WITH CLOSED-LOOP\n*        GAIN OF 10V/V OR GREATER TO INSURE STABILITY  <====\n*\n* connections:        non-inverting input\n*                     |   inverting input\n*                     |   |   positive power-supply\n*                     |   |   |   negative power-supply\n*                     |   |   |   |   output\n*                     |   |   |   |   |\n* OUTPUT CONNECTS:    1   2   99  50  97\n*\n.SUBCKT MAX409B 1 2 99 50 97\n****************INPUT STAGE**********************\nI1 99 4 20U\nM1   5  2 4 99 MOSFET\nR3   5 50 5.2696K\nM2   6  7 4 99 MOSFET\nR4   6 50 5.2696K\nCI1  1  0 2P\nCI2  2  0 2P\nDP1  1 99 DA\nDP2 50  1 DX\nDP3  2 99 DX\nDP4 50  2 DB\nC4  5 6 .07N\n*POLE AT 25KHZ\n************ GSUP CREATES AVOL VS VSUPPLY ********\nEH 99 98 99 50 0.5\nGSUP 0 106 POLY(1) 99 50 320 -41 1.2\n*THIS POLY VCCS MODELS THE OPEN LOOP GAIN AS\n*A FUNCTION OF THE POWER SUPPLY, WHICH WILL BE MULT. NODE 5,6 VOLT.\nRVSUP 0 106 1E4\n************ GAIN, 1ST POLE, SLEW STAGE************\nG0 98 9 POLY(2) 5 6 106 0 0 0 0 0 1E-6\n*GO MULTIPLIES NODE 106, AVOL VS SUPPLY, AND NODES 5,6 FROM INPUT STAGE.\nVS 9 10 0V\nR0  98  9 1E6\nC3 10 98 1.3UF\nD1 9 111 DX\nD2 112 9 DX\nV11 99 111 .5V\nV12 112 50 .5V\nI2 99 50 -19U\nEOS 7 1 POLY(1) 16 98 .75E-3 1\n*********COMMON-MODE ZERO STAGE********\nG4 98 16 POLY(2) 1 98 2 98 0 1E-7 1E-7\nR13 98 16 500\n******* POLE AND STAGE **********\nG3 98 15 10 98 1E-3\nR12 98 15 1E3\nC5 98 15 1.77N\n*            POLE AT 30KH\n******** POLE / ZERO STAGE ******\nG5 98 18 15 98 1E-3\nR14 98 18 1K\nC6 18 19 4.42NF\nR19 19 98 800\n*************OUTPUT STAGE****************\nF5 99 38 VA8 1\nD9 40 38 DX\nD10 38 99 DX\nVA7 99 40 0\nG12 98 32 18 98 1E-6\n*          ^ INSERT NODE FROM LAST STAGE HERE\nR15 98 32 1E6\nD3 32 36 DX\nD4 37 32 DX\nV5 35 37 .2V\nV4 36 35 -.2V\n*V5,V4 SET ISC\nR16 34 35 1K\nE1 99 33 99 32 1\nVA8 33 34 0V\nL 35 97 0.5\nRCON 35 97 30K\n*RCON ALSO  ENHANCES CONVERGENCE FEATURES\n******************************************\n.MODEL DA D(IS=100E-14 RS=0.5K)\n.MODEL DB D(IS=100E-14 RS=0.5K)\n.MODEL DX D(IS=100E-14)\n.MODEL MOSFET PMOS(VTO=-1.7 KP=1.8E-3)\n*VTO ESTABLISHES INPUT VOLT. RANGE\n.ENDS
TEXT -120 440 Left 2 !*********************************************************************\n*  TOSHIBA CORPORATION SEMICONDUCTOR & STORAGE PRODUCTS COMPANY\n*  Date                 : 15/12/2014\n*  File name            : SSM3K15AFS.lib\n*  Part Number          : SSM3K15AFS\n*  Parameter ver.       : Ver.1\n*  Simulator            : PSPICE\n*  Model call name      : NMOS_SSM3K15AFS\n*  TNOM                 : 25 degree\n*********************************************************************\n \n.SUBCKT NMOS_SSM3K15AFS 1 2 3\nM0 1 22 3 3\n+ smsmosfet\n+ L = 5E-006\n+ W = 0.008\n+ AD = 8e-09\n+ AS = 8e-09\n+ PD = 0.016\n+ PS = 0.016\nD0 3 1\n+ DDS1\nD1 3 1\n+ DDS2\nD2 2 10\n+ DGS1\nD3 3 10\n+ DGS2\nR1 10 3 1E+009\nR2 10 2 1E+009\nRG 2 22 200\n.MODEL smsmosfet NMOS\n+ LEVEL = 7\n+ MOBMOD = 1\n+ CAPMOD = 3\n+ NOIMOD = 1\n+ TOX = 1.5E-008\n+ XJ = 1.5E-007\n+ NCH = 1.7E+017\n+ NGATE = 0\n+ RSH = 0\n+ TNOM = 25\n+ VTH0 = 1.2076\n+ VOFF = -0.02\n+ NFACTOR = 3.583\n+ U0 = 952.2693\n+ K1 = 0.5\n+ K2 = 0\n+ K3 = 80\n+ K3B = 0\n+ W0 = 2.5E-006\n+ NLX = 1.74E-007\n+ DVT0 = 2.2\n+ DVT1 = 0.53\n+ DVT2 = -0.032\n+ DVT0W = 0\n+ DVT1W = 5.3E+006\n+ DVT2W = -0.032\n+ DWG = 0\n+ DWB = 0\n+ UA = 4.436e-13\n+ UB = 5.87E-019\n+ UC = -4.65E-011\n+ VSAT = 112118.3748\n+ A0 = 1.2732\n+ AGS = 0.029771\n+ B0 = 0\n+ B1 = 0\n+ KETA = -0.047\n+ A1 = 0\n+ A2 = 1\n+ DELTA = 0.02079\n+ RDSW = 8680\n+ PRWG = 0\n+ PRWB = 0\n+ WR = 1\n+ CDSC = 0.00024\n+ CDSCD = 0\n+ CDSCB = 0\n+ CIT = 0\n+ ETA0 = 0.08\n+ ETAB = -0.07\n+ DSUB = 0.56\n+ PCLM = 0.0014469\n+ PDIBLC1 = 0.39\n+ PDIBLC2 = 0.012118\n+ PDIBLCB = 0\n+ DROUT = 0.56\n+ PSCBE1 = 4.24E+008\n+ PSCBE2 = 1E-009\n+ PVAG = 0\n+ ALPHA0 = 0\n+ ALPHA1 = 0\n+ BETA0 = 30\n+ NJ = 1\n+ JS = 1.6481e-14\n+ XPART = 0\n+ CGSO = 1.9718e-10\n+ CGDO = 3.5042e-10\n+ CGBO = 0\n+ CGDL = 1.5468e-08\n+ CGSL = 2.4386e-12\n+ CKAPPA = 2.9066\n+ CF = 0\n+ CLC = 1E-007\n+ CLE = 0.6\n+ VOFFCV = 0\n+ NOFF = 1\n+ DLC = 0\n+ ACDE = 1\n+ MOIN = 15\n+ CJ = 3.2319e-06\n+ CJSW = 1E-012\n+ CJSWG = 1E-012\n+ PB = 0.40048\n+ PBSW = 1\n+ PBSWG = 1\n+ MJ = 1.7065\n+ MJSW = 0.33\n+ MJSWG = 0.33\n+ AF = 1\n+ EF = 1\n+ KF = 0\n+ UTE = -0.5\n+ KT1 = -0.665\n+ KT1L = 0\n+ KT2 = 0.022\n+ UA1 = 4.31E-009\n+ UB1 = -7.61E-018\n+ UC1 = -5.6E-011\n+ AT = 3300\n+ PRT = 15000\n+ XTI = 3\n+ TCJ = 0\n+ TPB = 0\n+ TCJSW = 0\n+ TPBSW = 0\n+ TCJSWG = 0\n+ TPBSWG = 0\n+ DWC = 0.0035277\n.MODEL DDS1 D\n+ TNOM = 25\n+ IS = 8.8013e-14\n+ RS = 1.1503\n+ N = 1.15\n+ CJO = 1.5691e-15\n+ VJ = 0.85666\n+ M = 0.54386\n+ XTI = 3\n+ BV = 30\n+ IBV = 0.0001\n.MODEL DDS2 D\n+ TNOM = 25\n+ IS = 8.8013e-14\n+ RS = 1.1503\n+ N = 1.15\n+ CJO = 2.9872e-12\n+ VJ = 0.69573\n+ M = 0.36689\n+ XTI = 3\n.MODEL DGS1 D\n+ TNOM = 25\n+ IS = 1E-015\n.MODEL DGS2 D\n+ TNOM = 25\n+ IS = 1E-015\n.ENDS
