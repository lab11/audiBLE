Version 4
SHEET 1 2188 5104
WIRE -1008 -304 -1136 -304
WIRE -1136 -288 -1136 -304
WIRE -1008 -240 -1008 -304
WIRE -624 -208 -624 -224
WIRE -1216 -192 -1248 -192
WIRE -1136 -192 -1136 -208
WIRE -1136 -160 -1136 -192
WIRE 1280 -160 1200 -160
WIRE 1440 -160 1360 -160
WIRE -624 -96 -624 -128
WIRE -1008 -80 -1008 -160
WIRE -1008 -80 -1136 -80
WIRE -1008 -48 -1008 -80
WIRE 1264 -32 1264 -48
WIRE 608 -16 608 -64
WIRE 1104 -16 1088 -16
WIRE 1200 -16 1200 -160
WIRE 1200 -16 1184 -16
WIRE 1232 -16 1200 -16
WIRE 176 0 144 0
WIRE 208 0 176 0
WIRE 352 0 288 0
WIRE 1440 0 1440 -160
WIRE 1440 0 1296 0
WIRE 1088 16 1088 -16
WIRE 1232 16 1216 16
WIRE 496 48 480 48
WIRE 816 48 720 48
WIRE 1264 48 1264 32
WIRE 816 96 816 48
WIRE 1056 96 816 96
WIRE 1088 96 1056 96
WIRE 1216 96 1216 16
WIRE 1216 96 1136 96
WIRE 1296 96 1216 96
WIRE 1440 96 1440 0
WIRE 1440 96 1376 96
WIRE 240 112 240 96
WIRE 176 128 176 0
WIRE 208 128 176 128
WIRE 816 128 816 96
WIRE 0 144 -48 144
WIRE 352 144 352 0
WIRE 352 144 272 144
WIRE 416 144 416 48
WIRE 416 144 352 144
WIRE 496 144 464 144
WIRE 752 144 720 144
WIRE 0 160 0 144
WIRE 32 160 0 160
WIRE 144 160 96 160
WIRE 208 160 144 160
WIRE 1216 160 1216 96
WIRE 1216 160 928 160
WIRE 1216 176 1216 160
WIRE 240 192 240 176
WIRE 752 192 752 144
WIRE 816 192 752 192
WIRE 464 240 464 144
WIRE 560 240 560 208
WIRE 560 240 464 240
WIRE 656 240 656 208
WIRE 656 240 560 240
WIRE 752 240 752 192
WIRE 880 240 848 240
WIRE 144 256 144 240
WIRE 656 256 656 240
WIRE 1216 256 1216 240
WIRE 1216 256 928 256
WIRE 1216 320 1216 256
FLAG -608 272 0
FLAG -608 192 Vcc
FLAG -624 96 0
FLAG -624 16 Vref
FLAG -624 -96 0
FLAG -624 -224 GPIO
FLAG -1008 -48 0
FLAG -1248 -192 mic
FLAG -48 144 sineref
FLAG 656 256 0
FLAG 608 -64 Vcc
FLAG 752 240 0
FLAG 1264 -48 Vcc
FLAG 1216 320 0
FLAG 1088 16 0
FLAG 1264 48 0
FLAG 848 240 GPIO
FLAG 240 96 Vcc
FLAG 240 192 0
FLAG 64 0 Vref
FLAG 144 256 Vref
FLAG -992 208 0
FLAG -992 128 sineref
SYMBOL voltage -608 176 R0
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
SYMATTR InstName V1
SYMATTR Value 3.3
SYMBOL voltage -624 0 R0
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
SYMATTR InstName V5
SYMATTR Value 1
SYMBOL voltage -624 -224 R0
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
SYMATTR InstName V6
SYMATTR Value PULSE(0 3.3 0.001 0 0 0.001 1 1)
SYMBOL voltage -1008 -256 R0
WINDOW 3 19 95 Left 2
SYMATTR Value wavefile="sample.wav" chan=0
SYMATTR InstName V7
SYMBOL res -1152 -304 R0
SYMATTR InstName R1
SYMATTR Value 1000
SYMBOL res -1152 -176 R0
SYMATTR InstName R6
SYMATTR Value 500
SYMBOL voltage -1232 -192 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 -32 56 VBottom 2
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
SYMATTR InstName V8
SYMATTR Value 0.65
SYMBOL LTC1966 608 96 R0
SYMATTR InstName U5
SYMBOL cap 832 192 R180
WINDOW 0 24 56 Left 2
WINDOW 3 24 8 Left 2
SYMATTR InstName C6
SYMATTR Value 1µ
SYMBOL Opamps\\opamp2 1264 -64 R0
SYMATTR InstName U6
SYMATTR Value MAX409B
SYMBOL res 1376 -176 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R14
SYMATTR Value 10k
SYMBOL res 1200 -32 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 54 VTop 2
SYMATTR InstName R15
SYMATTR Value 10k
SYMBOL res 1392 80 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R16
SYMATTR Value 10k
SYMBOL res 1152 80 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R17
SYMATTR Value 20k
SYMBOL cap 1232 240 R180
WINDOW 0 24 56 Left 2
WINDOW 3 24 8 Left 2
SYMATTR InstName C7
SYMATTR Value 100µ
SYMBOL nmos 880 160 R0
SYMATTR InstName M2
SYMATTR Value NMOS_SSM3K15AFS
SYMATTR Prefix X
SYMBOL Opamps\\opamp2 240 80 R0
SYMATTR InstName U7
SYMATTR Value MAX409B
SYMBOL res 304 -16 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R18
SYMATTR Value 100k
SYMBOL res 48 16 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 0 56 VBottom 2
SYMATTR InstName R19
SYMATTR Value 1k
SYMBOL res 128 144 R0
SYMATTR InstName R20
SYMATTR Value 47k
SYMBOL cap 96 144 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C8
SYMATTR Value 0.1µ
SYMBOL cap 480 32 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C1
SYMATTR Value 100n
SYMBOL voltage -992 112 R0
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
SYMATTR InstName V2
SYMATTR Value SINE(0.65 0.314 3000)
TEXT -640 328 Left 2 !.tran 0 1 0
TEXT -976 448 Left 2 !* ////////////// MAX409B MACROMODEL //////////////////\n*\n*  ===>  MAX409B MUST BE OPERATED WITH CLOSED-LOOP\n*        GAIN OF 10V/V OR GREATER TO INSURE STABILITY  <====\n*\n* connections:        non-inverting input\n*                     |   inverting input\n*                     |   |   positive power-supply\n*                     |   |   |   negative power-supply\n*                     |   |   |   |   output\n*                     |   |   |   |   |\n* OUTPUT CONNECTS:    1   2   99  50  97\n*\n.SUBCKT MAX409B 1 2 99 50 97\n****************INPUT STAGE**********************\nI1 99 4 20U\nM1   5  2 4 99 MOSFET\nR3   5 50 5.2696K\nM2   6  7 4 99 MOSFET\nR4   6 50 5.2696K\nCI1  1  0 2P\nCI2  2  0 2P\nDP1  1 99 DA\nDP2 50  1 DX\nDP3  2 99 DX\nDP4 50  2 DB\nC4  5 6 .07N\n*POLE AT 25KHZ\n************ GSUP CREATES AVOL VS VSUPPLY ********\nEH 99 98 99 50 0.5\nGSUP 0 106 POLY(1) 99 50 320 -41 1.2\n*THIS POLY VCCS MODELS THE OPEN LOOP GAIN AS\n*A FUNCTION OF THE POWER SUPPLY, WHICH WILL BE MULT. NODE 5,6 VOLT.\nRVSUP 0 106 1E4\n************ GAIN, 1ST POLE, SLEW STAGE************\nG0 98 9 POLY(2) 5 6 106 0 0 0 0 0 1E-6\n*GO MULTIPLIES NODE 106, AVOL VS SUPPLY, AND NODES 5,6 FROM INPUT STAGE.\nVS 9 10 0V\nR0  98  9 1E6\nC3 10 98 1.3UF\nD1 9 111 DX\nD2 112 9 DX\nV11 99 111 .5V\nV12 112 50 .5V\nI2 99 50 -19U\nEOS 7 1 POLY(1) 16 98 .75E-3 1\n*********COMMON-MODE ZERO STAGE********\nG4 98 16 POLY(2) 1 98 2 98 0 1E-7 1E-7\nR13 98 16 500\n******* POLE AND STAGE **********\nG3 98 15 10 98 1E-3\nR12 98 15 1E3\nC5 98 15 1.77N\n*            POLE AT 30KH\n******** POLE / ZERO STAGE ******\nG5 98 18 15 98 1E-3\nR14 98 18 1K\nC6 18 19 4.42NF\nR19 19 98 800\n*************OUTPUT STAGE****************\nF5 99 38 VA8 1\nD9 40 38 DX\nD10 38 99 DX\nVA7 99 40 0\nG12 98 32 18 98 1E-6\n*          ^ INSERT NODE FROM LAST STAGE HERE\nR15 98 32 1E6\nD3 32 36 DX\nD4 37 32 DX\nV5 35 37 .2V\nV4 36 35 -.2V\n*V5,V4 SET ISC\nR16 34 35 1K\nE1 99 33 99 32 1\nVA8 33 34 0V\nL 35 97 0.5\nRCON 35 97 30K\n*RCON ALSO  ENHANCES CONVERGENCE FEATURES\n******************************************\n.MODEL DA D(IS=100E-14 RS=0.5K)\n.MODEL DB D(IS=100E-14 RS=0.5K)\n.MODEL DX D(IS=100E-14)\n.MODEL MOSFET PMOS(VTO=-1.7 KP=1.8E-3)\n*VTO ESTABLISHES INPUT VOLT. RANGE\n.ENDS
TEXT -120 440 Left 2 !*********************************************************************\n*  TOSHIBA CORPORATION SEMICONDUCTOR & STORAGE PRODUCTS COMPANY\n*  Date                 : 15/12/2014\n*  File name            : SSM3K15AFS.lib\n*  Part Number          : SSM3K15AFS\n*  Parameter ver.       : Ver.1\n*  Simulator            : PSPICE\n*  Model call name      : NMOS_SSM3K15AFS\n*  TNOM                 : 25 degree\n*********************************************************************\n \n.SUBCKT NMOS_SSM3K15AFS 1 2 3\nM0 1 22 3 3\n+ smsmosfet\n+ L = 5E-006\n+ W = 0.008\n+ AD = 8e-09\n+ AS = 8e-09\n+ PD = 0.016\n+ PS = 0.016\nD0 3 1\n+ DDS1\nD1 3 1\n+ DDS2\nD2 2 10\n+ DGS1\nD3 3 10\n+ DGS2\nR1 10 3 1E+009\nR2 10 2 1E+009\nRG 2 22 200\n.MODEL smsmosfet NMOS\n+ LEVEL = 7\n+ MOBMOD = 1\n+ CAPMOD = 3\n+ NOIMOD = 1\n+ TOX = 1.5E-008\n+ XJ = 1.5E-007\n+ NCH = 1.7E+017\n+ NGATE = 0\n+ RSH = 0\n+ TNOM = 25\n+ VTH0 = 1.2076\n+ VOFF = -0.02\n+ NFACTOR = 3.583\n+ U0 = 952.2693\n+ K1 = 0.5\n+ K2 = 0\n+ K3 = 80\n+ K3B = 0\n+ W0 = 2.5E-006\n+ NLX = 1.74E-007\n+ DVT0 = 2.2\n+ DVT1 = 0.53\n+ DVT2 = -0.032\n+ DVT0W = 0\n+ DVT1W = 5.3E+006\n+ DVT2W = -0.032\n+ DWG = 0\n+ DWB = 0\n+ UA = 4.436e-13\n+ UB = 5.87E-019\n+ UC = -4.65E-011\n+ VSAT = 112118.3748\n+ A0 = 1.2732\n+ AGS = 0.029771\n+ B0 = 0\n+ B1 = 0\n+ KETA = -0.047\n+ A1 = 0\n+ A2 = 1\n+ DELTA = 0.02079\n+ RDSW = 8680\n+ PRWG = 0\n+ PRWB = 0\n+ WR = 1\n+ CDSC = 0.00024\n+ CDSCD = 0\n+ CDSCB = 0\n+ CIT = 0\n+ ETA0 = 0.08\n+ ETAB = -0.07\n+ DSUB = 0.56\n+ PCLM = 0.0014469\n+ PDIBLC1 = 0.39\n+ PDIBLC2 = 0.012118\n+ PDIBLCB = 0\n+ DROUT = 0.56\n+ PSCBE1 = 4.24E+008\n+ PSCBE2 = 1E-009\n+ PVAG = 0\n+ ALPHA0 = 0\n+ ALPHA1 = 0\n+ BETA0 = 30\n+ NJ = 1\n+ JS = 1.6481e-14\n+ XPART = 0\n+ CGSO = 1.9718e-10\n+ CGDO = 3.5042e-10\n+ CGBO = 0\n+ CGDL = 1.5468e-08\n+ CGSL = 2.4386e-12\n+ CKAPPA = 2.9066\n+ CF = 0\n+ CLC = 1E-007\n+ CLE = 0.6\n+ VOFFCV = 0\n+ NOFF = 1\n+ DLC = 0\n+ ACDE = 1\n+ MOIN = 15\n+ CJ = 3.2319e-06\n+ CJSW = 1E-012\n+ CJSWG = 1E-012\n+ PB = 0.40048\n+ PBSW = 1\n+ PBSWG = 1\n+ MJ = 1.7065\n+ MJSW = 0.33\n+ MJSWG = 0.33\n+ AF = 1\n+ EF = 1\n+ KF = 0\n+ UTE = -0.5\n+ KT1 = -0.665\n+ KT1L = 0\n+ KT2 = 0.022\n+ UA1 = 4.31E-009\n+ UB1 = -7.61E-018\n+ UC1 = -5.6E-011\n+ AT = 3300\n+ PRT = 15000\n+ XTI = 3\n+ TCJ = 0\n+ TPB = 0\n+ TCJSW = 0\n+ TPBSW = 0\n+ TCJSWG = 0\n+ TPBSWG = 0\n+ DWC = 0.0035277\n.MODEL DDS1 D\n+ TNOM = 25\n+ IS = 8.8013e-14\n+ RS = 1.1503\n+ N = 1.15\n+ CJO = 1.5691e-15\n+ VJ = 0.85666\n+ M = 0.54386\n+ XTI = 3\n+ BV = 30\n+ IBV = 0.0001\n.MODEL DDS2 D\n+ TNOM = 25\n+ IS = 8.8013e-14\n+ RS = 1.1503\n+ N = 1.15\n+ CJO = 2.9872e-12\n+ VJ = 0.69573\n+ M = 0.36689\n+ XTI = 3\n.MODEL DGS1 D\n+ TNOM = 25\n+ IS = 1E-015\n.MODEL DGS2 D\n+ TNOM = 25\n+ IS = 1E-015\n.ENDS
TEXT 1104 416 Left 2 !* WARNING : please consider following remarks before usage\n*\n* 1) All models are a tradeoff between accuracy and complexity (ie. simulation \n*    time).\n* 2) Macromodels are not a substitute to breadboarding, they rather confirm the\n*    validity of a design approach and help to select surrounding component values.\n*\n* 3) A macromodel emulates the NOMINAL performance of a TYPICAL device within \n*    SPECIFIED OPERATING CONDITIONS (ie. temperature, supply voltage, etc.).\n*    Thus the macromodel is often not as exhaustive as the datasheet, its goal\n*    is to illustrate the main parameters of the product.\n*\n* 4) Data issued from macromodels used outside of its specified conditions\n*    (Vcc, Temperature, etc) or even worse: outside of the device operating \n*    conditions (Vcc, Vicm, etc) are not reliable in any way.\n*\n*\n** Standard Linear Ics Macromodels, 1993. \n** CONNECTIONS :\n* 1 INVERTING INPUT\n* 2 NON-INVERTING INPUT\n* 3 OUTPUT\n* 4 POSITIVE POWER SUPPLY\n* 5 NEGATIVE POWER SUPPLY\n.SUBCKT LM358 1 2 3 4 5\n***************************\n.MODEL MDTH D IS=1E-8 KF=3.104131E-15 CJO=10F\n* INPUT STAGE\nCIP 2 5 1.000000E-12\nCIN 1 5 1.000000E-12\nEIP 10 5 2 5 1\nEIN 16 5 1 5 1\nRIP 10 11 2.600000E+01\nRIN 15 16 2.600000E+01\nRIS 11 15 2.003862E+02\nDIP 11 12 MDTH 400E-12\nDIN 15 14 MDTH 400E-12\nVOFP 12 13 DC 0 \nVOFN 13 14 DC 0\nIPOL 13 5 1.000000E-05\nCPS 11 15 3.783376E-09\nDINN 17 13 MDTH 400E-12\nVIN 17 5 0.000000e+00\nDINR 15 18 MDTH 400E-12\nVIP 4 18 2.000000E+00\nFCP 4 5 VOFP 3.400000E+01\nFCN 5 4 VOFN 3.400000E+01\nFIBP 2 5 VOFN 2.000000E-03\nFIBN 5 1 VOFP 2.000000E-03\n* AMPLIFYING STAGE\nFIP 5 19 VOFP 3.600000E+02\nFIN 5 19 VOFN 3.600000E+02\nRG1 19 5 3.652997E+06\nRG2 19 4 3.652997E+06\nCC 19 5 6.000000E-09\nDOPM 19 22 MDTH 400E-12\nDONM 21 19 MDTH 400E-12\nHOPM 22 28 VOUT 7.500000E+03\nVIPM 28 4 1.500000E+02\nHONM 21 27 VOUT 7.500000E+03\nVINM 5 27 1.500000E+02\nEOUT 26 23 19 5 1\nVOUT 23 5 0\nROUT 26 3 20\nCOUT 3 5 1.000000E-12\nDOP 19 25 MDTH 400E-12\nVOP 4 25 2.242230E+00\nDON 24 19 MDTH 400E-12\nVON 24 5 7.922301E-01\n.ENDS
